!function(t,e){"use strict";var n=t("#turbine-rotor").eq(0),a=0,i=.5,r=new Rickshaw.Graph.Ajax({element:e.getElementById("chart"),width:600,height:500,stroke:!0,renderer:"bar",dataURL:"./json/",onData:function(t){return t[0].data[0].y=80,t},onComplete:function(e){{var n=e.graph;new Rickshaw.Graph.HoverDetail({graph:n,yFormatter:function(t){return 15e3>t&&(i=t/1e3),t}})}t("#legend").html("");new Rickshaw.Graph.Legend({graph:n,element:t("#legend")[0]})},series:[{name:"Wind",color:"#491D37"},{name:"Demand",color:"#963"}]}),o=function(t){r.dataURL=t,r.request()},s=function(){a+=i,a>360&&(a-=360);var t="rotateZ("+a+"deg)";n.css({"-webkit-transform":t,"-moz-transform":t,"-ms-transform":t,"-o-transform":t,transform:t}),requestAnimationFrame(s)};s();var m={values:{start:"",end:""},init:function(){this.cacheItems(),this.bindEvents()},cacheItems:function(){this.$form=t("#form"),this.$start=t("#start"),this.$end=t("#end")},bindEvents:function(){var e=this;t("#form").submit(this.submitForm.bind(this)),t("#start").datetimepicker({formatTime:"H.i",minDate:"2009/05/14",onChangeDateTime:this.updateStartTime.bind(this),onShow:function(){var t=e.dateOption(e.$end,"+1970/01/01");this.setOptions({maxDate:t})}}),t("#end").datetimepicker({formatTime:"H.i",maxDate:"+1970/01/01",onChangeDateTime:this.updateEndTime.bind(this),onShow:function(){var t=e.dateOption(e.$start,"2009/05/14");this.setOptions({minDate:t})}})},dateOption:function(t,e){var n=t.val()?t.val():e,a=n.split(" ");return a.length>1&&(n=a[0]),n},updateStartTime:function(t){this.values.start=t&&"undefined"!=typeof t?t.dateFormat("unixtime"):""},updateEndTime:function(t){this.values.end=t&&"undefined"!=typeof t?t.dateFormat("unixtime"):""},submitForm:function(e){e.preventDefault();var n=this.$form.attr("action")+"?"+t.param(this.values);o(n)}};m.init()}(jQuery,document);