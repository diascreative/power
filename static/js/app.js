!function(){var t=angular.module("turbine-directives",[]);t.directive("parseStyle",["$interpolate",function(t){return function(e,r){var a=t(r.html()),n=function(){return a(e)};e.$watch(n,function(t){r.html(t)})}}]),t.directive("turbine",function(){return{restrict:"E",templateUrl:"./templates/turbine.html"}}),t.directive("turbineStats",function(){return{restrict:"E",templateUrl:"./templates/turbine-stats.html"}})}(),function(){"use strict";var t=angular.module("windTurbineApp",["turbine-directives","ngBootstrap","angular-rickshaw"]);t.controller("turbineController",["$scope","$http",function(t,e){t.rotationSpeed=10,this.graph={},this.currentPercentage=0,this.speed=0,this.wattage=0,this.displayDate=new Date,t.prevSpeed=0,this.usageExamples=[{action:"powering",name:"homes for an entire day",consumption:46e5/365},{action:"making",name:"toasts",consumption:800}],t.loadInData=function(){var t=this.graph;t.series=[{name:"Wind",color:"#29abe2",data:[{x:0,y:0}]}],e.get("./json/",{start:"",end:""}).success(function(e){t.series=e})}.bind(this);var r=function(e,r,a){if(15e3>a){var i=a/500;i!==t.prevSpeed&&(t.prevSpeed=i,n(i),this.wattage=a,this.displayDate=new Date(1e3*r))}return a+"MW"},a=function(){var t=this.graph.series[0].data.pop(),e=this.graph.series[1].data.pop();this.currentPercentage=t.y/e.y*100},n=function(e){var r=$("#turbine-rotor-container"),a=$("#turbine-rotor").eq(0),n=11-e,s=n+"s",o=360/(40*n),u=i(a.css("transform")),c=i(r.css("transform"));0===e&&(s="3000000s"),t.rotationSpeed=s,t.$digest(),r.css("transform","rotateZ("+(u+c+o)+"deg)"),a.removeClass("animated"),setTimeout(function(){a.addClass("animated")},2)},i=function(t){var e=0;if("none"!==t){var r=t.split("(")[1];r=r.split(")")[0],r=r.split(",");var a=r[0],n=r[1],i=(r[2],r[3],Math.sqrt(a*a+n*n),Math.atan2(n,a));0>i&&(i+=2*Math.PI),e=Math.round(i*(180/Math.PI))}return e};this.graph.options={renderer:"area",height:100},this.graph.features={hover:{formatter:r.bind(this)},complete:a.bind(this)},this.graph.series=[{name:"Wind",color:"#29abe2",data:[{x:0,y:0}]}],t.loadInData()}])}();